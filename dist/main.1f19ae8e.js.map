{"version":3,"sources":["table.js","utils.js","roll.js","journal.js","parser.js","main.js"],"names":["distance","exports","name","dice","entries","number","element","roomType","trap","tables","isIterable","obj","Symbol","iterator","rollDie","expression","parts","split","numberOfDice","parseInt","sides","total","i","Math","floor","random","rollOnTable","table","result","randomNumber","length","entry","includes","range","lowEnd","highEnd","fullResult","concat","_parser","require","_roll","createJournalLine","content","journal","document","getElementById","newLine","createElement","appendChild","createRollOnTableButton","button","innerHTML","onclick","btnFunction","parseExpression","clearJournal","_table","_utils","_interopRequireDefault","_journal","e","__esModule","default","_toConsumableArray","r","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","a","_arrayLikeToArray","t","toString","call","slice","constructor","Array","from","test","isArray","n","parseTable","console","log","openIndex","indexOf","closeIndex","before","substring","tableName","after","find","error","push","createTextNode","apply","parseDie","diceExpression","btnClearJournal"],"mappings":";;AKAA,IAAAsC,OAAA,GAAAC,OAAA;AACA,IAAAoB,QAAA,GAAApB,OAAA;AAEA,IAAMW,MAAM,GAAGN,QAAQ,CAACC,cAAc,CAAC,QAAQ,CAAC;AAChD,IAAMsD,eAAe,GAAGvD,QAAQ,CAACC,cAAc,CAAC,cAAc,CAAC;AAE/DK,ALNO,ACAQ,IDAFlD,EKMP,CAACoD,EJNiB1C,GDAH,EKMP,CLNOT,EKMJ,EJNiBS,CAACC,EDAd,CAAAX,ACAiB,EAAE,IIMX,ELNR,GAAG;AEAjB,EGOL,ALNAE,ACAA,IDAI,ACAAS,EDAE,CEDQG,ADCP,IAAI,GCDUA,CAACC,ADCP,CDAC,CCAC,QCDe,EAAE;ACApC,ACAA,ECQE,AHPA,AFCAZ,EGFFmC,ACAAkB,AHEI,ECDIxC,AFCF,EAAE,EIFR,CDAA,ADCa,ADCF,EGFXuB,AJEa,CGFbA,ADCgBxB,EDCA,IGFhB,CDAA,GDC0B,CAACE,KAAK,CAAC,GAAG,CAAC;ACArC,ACAA,ECQE,AHPA,AFCAb,ACAA,EEFFoC,ACAAiB,EFCQvC,GCDR,AHES,CIFT,CJEW,CGFXqB,AHGI,CIHJmB,KFCoB,CCDpB,EDCuBvC,QAAQ,CAACH,KEDhC,AFCqC,CEDrCuB,AFCsC,CAAC,CAAC,EAAE,EAAE,CED5C,AFC6C;ACCtC,ACDP,EFCE,ADCA,EGFFoB,AJEMtD,EEDEe,GCAQqB,AFCP,CDAG,CEDC,CEDb,AJEc,EEDEtB,CEDhBoB,AJEiB,CCAD5B,GAAG,CAACC,EGFpB,AFCwB,CAACI,GCAQyB,AFCP,CEDQC,AFCP7B,CCDG,CAAC,CAAC,CAAC,EAAE,CCAM,CDAJ,ADCF,CEDQ,ADAL,ADCF,KAAK,UAAU;AGDnD,AHEA,EEDE,AEOA,AHPA,EEDF2B,AJCmBlC,EGAXqC,ADAFtB,GEDN,EFCW,AFAe,CID1BkB,CDCe,AHAa,CEAd,CAAC,CCAGK,GCDlB,KDC0B,CAACC,cAAc,CAAC,SAAS,CAAC;ACDnB,EDE/B,AEOA,AHNA,AFFkC,CAAC,EACjC,CGAIC,CDCD,EEH0BY,EFGtBpC,CAAC,CCDG,EDCA,CCDGsB,ADCF,EAAEtB,CAAC,GAAGJ,ECDI,CAAC6B,OCFMa,CAAA,CFGC,EAAEtC,CAAC,CCDG,CAAC,EDCA,CAAC,ECDI,ACFbsC,AFGW,CCDG,ACFd,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAAA,EDG/B,AEOA,EHNEvC,AFFEhB,GGCC,ECH0B0D,AFIxB,CFFG,CGCDzC,CAAC,AHDE,CEEDC,ECDE,CAAC,CDCC,AFFE,CGCDD,ADCAE,CCDC,GAAGkB,CDCC,CAACnB,IEJSyC,AFIL,CCDC,ACHI,AFIJvC,CCDCK,KDCK,CCDC,ADCA,CAAC,CCDCR,CAAC,CCHN2C,AFIO7C,GCDG,CAAC,CDCC,CCDC,ADCA,GAAG,CAAC,QEJjB,CAAA4C,CAAA,KAAAE,gBAAA,CAAAF,CAAA,KAAAG,2BAAA,CAAAH,CAAA,KAAAI,kBAAA;AAAA,ECW/B,AHNA,ECDEtB,AHFiBxC,EKSboC,GDXyB0B,EDItB,AHFiB,CGEhBpB,CEOG,ALTe,GKSZ,IAAAM,GFPK,CAACZ,ICJS,GDIF,CAACpB,CAAC,CAAC,CAAC,OCJF+C,CCWA,EAAC,MDXD,uDCW8D,CAAC;ADX/D,EDK/B,AEOA,AHNA,AFJiD,CAAC,EAChD,CKSF5B,GDZ+B0B,AFMxB9C,KAAK,kBGMK,EAACqB,GDZasB,CAAA,EAAAM,CCYN,ADZM,CCYL,ODZKN,CAAA,2BAAAA,CAAA,SAAAO,iBAAA,CAAAP,CAAA,EAAAM,CAAA,OAAAE,CAAA,MAAAC,QAAA,CAAAC,IAAA,CAAAV,CAAA,EAAAW,KAAA,6BAAAH,CAAA,IAAAR,CAAA,CAAAY,WAAA,KAAAJ,CAAA,GAAAR,CAAA,CAAAY,WAAA,CAAA1E,IAAA,aAAAsE,CAAA,cAAAA,CAAA,GAAAK,KAAA,CAAAC,IAAA,CAAAd,CAAA,oBAAAQ,CAAA,+CAAAO,IAAA,CAAAP,CAAA,IAAAD,iBAAA,CAAAP,CAAA,EAAAM,CAAA;ACajC,ADbiC,AFOjC,CGMC,CFPC3B,EHHItC,KGGG,ACNwB6D,CDMvBlB,AHHE,EAAE,KAAK,IGGE,CAACF,ICNWkB,CAAA,EDMJ,CAAC,2BCNGpD,MAAA,YAAAoD,CAAA,CAAApD,MAAA,CAAAC,QAAA,aAAAmD,CAAA,uBAAAa,KAAA,CAAAC,IAAA,CAAAd,CAAA;ADOjC,AEQAmC,ADfiC,AFS1B,IFNc7F,KIHY2D,AFSjBvC,EFNY,EAAE,EKYf,CAAC0B,IHNW1B,CAACC,EGML,GAAG,AHNO,EETAqC,AFSE,CETF,QAAAa,CCeK,IDfL,CAAAG,OAAA,CAAAhB,CAAA,UAAAO,iBAAA,CAAAP,CAAA;ADS1B,ACT0B,ECgB/BmB,AHNA,AFPkC,CAAC,GEO/BvD,GCDUqB,AEOP,ADhBwBsB,CCgBvBa,EHNE,CGMC,CAAC,CHNC,EAAE,UEVgBpB,CAAA,EAAAM,CAAA,CDSMrB,CAACtB,IEOH,CFPQ,AEOP,EFPS,ICTd2C,CAAA,IAAAA,CAAA,GAAAN,CAAA,CAAAlC,MAAA,MAAAwC,CAAA,GAAAN,CAAA,CAAAlC,MAAA,YAAA8B,CAAA,MAAAqB,CAAA,GAAAJ,KAAA,CAAAP,CAAA,GAAAV,CAAA,GAAAU,CAAA,EAAAV,CAAA,IAAAqB,CAAA,CAAArB,CAAA,IAAAI,CAAA,CAAAJ,CAAA,UAAAqB,CAAA;AAE1B,AJEP,CAAC,CGMC,AEOA,AHNA,ICDM/B,AEONK,AHNM1B,GETQqD,GDQF,GAAGtC,GDCG,CETMsC,CAACnE,CFSJD,ECDE,CAACiC,GEOZ,CHNgB,CGMf,AHNgBpB,CGMf,ADfqB,EAAE,EFSH,CAACxB,ECDE,CAAC,CDCC,CAAC,MCDM,CAAC;AEQjD,ALZO,CKYN,CFPC+C,ACRAiC,AFSA,EFNW5E,GEMN,CCDC,CAAC4C,ACRA,CAACiC,CFSC9D,CAAC,AFNS,CIHR,EFSE,AFNMrB,CEML,ECDE,ADCAqB,CAAC,ECDE,CDCCK,AFND,CAAApB,IEMM,CAACH,GFNP,CIHRiC,EJGW,CEMW,CAACP,EETvB,CAAmBf,GFSU,EAAEO,CAAC,IETH,AFSO,CETL,AFSM,CETL,CFSO,sBCDsB;EACxE4B,ACRA,AJGAhD,EEME,EETIwC,AJGF,EGKE,ADCEX,AFNF,CGKCqB,ICRM,AFSA,GCDC,ACRE,AFSAzB,EETE,CDQD,AHLA,EEMI,CAACvB,MCDIiD,CDCG,CAAC/B,CAAC,CAAC,OCDK+B,CAAA,EAAG;ECNxC,AJEAlD,EGKEsC,ADCA,EERI4C,AJEF,EEMEtD,AFNA,KEMK,CAAC1B,AFNA,CIFG,GAAGU,EFQA,CCDC,ADCAiB,CCDC,IAAAsB,ECPQ,CAACgC,AFQF,CAAC,GAAG,CAAC,EERI,AFQF,CERG,GAAG,CAAC,QDON,EAAC,IAAA5D,iBAAW,EAACC,KAAK,CAAC,CAAC,CAAC;EACxD,ACPA,AJEAvB,CGKC,GCPKmF,AFQF,GFNG,CEMGtD,CFND,CACP,GEKa,CERC,EFQEF,CERChB,IFQI,CAACV,KERK,CAACiF,AFQA,CAACrE,KAAK,CERC,AFQA,CERC,EFQE,CERC,AFQA,CERC;EDQ1C,ACNA,EJCIZ,EIDEmF,AFOF,GCDGtC,CDCGhB,AFNA,EIDE,AJCA,GGKC,ACNEnB,CFOC,CFNC,EEMEI,MEPM,CAACsE,CFOC,CAACxD,KAAK,CAAC,CEPC,AFOA,CEPC,AFOA,CEPC,CFOC,CEPCoD,CFOC,CAAC,OEPO,CAAC;ADOnD,ECNE,EJAmB/E,EIAboF,AFOF,IAAMvD,CFPgB,EAAE,EIAb,EFOE,CEPCpB,EFOEI,QEPQ,AFOA,CEPCsE,AFOAxD,KAAK,CAAC,CAAC,CAAC,CEPC,CAACoD,AFOA,EAAE,CAAC,MEPM,GAAG,CAAC,EAAEE,UAAU,CAAC;ADQ5D,ECPL,AJDoC,CAAC,EACnC,CIAII,AFOF,GCAUpC,CDAN1B,CEPG,GAAGd,ODOYwC,CAAA,ADAN,ECAS,ACPL,CAACkC,CFODvD,MAAM,EEPI,CAACqD,CFOD1D,SEPW,GAAG,AFOF,CEPG,CAAC,EFOAM,OAAO,EAAE;ECC3D,ACNA,EJFI9B,EGQEsC,ACNAhB,EFMAC,EFRI,CIEC,CJFC,CGQC,CCNCnB,AFMF,CFRG,CGQCmC,CDADb,KAAK,CAACzB,CCAG,CAACuC,ECNL,CAAC+C,EFMO,EENH,CAAC,MDMa,CAAC,GCNbpB,CAAC,KDMqB,CAAC;EAClD7B,ECP4B,AJFXrC,EESb,GCAG,CAAC6C,CCPyBqB,AJFT,CIEU,CAACtE,AJFT,IIEa,EDOtB,GAAG,ACPwBwF,EDOtB,OCP+B;ADQvD,ECRuD,AJFlB,CAAC,CIEkB,AFQpD,CAA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","file":"main.1f19ae8e.js","sourceRoot":"..\\src","sourcesContent":["export const distance = {\r\n  name: 'Distance',\r\n  dice: '1d6',\r\n  entries: [\r\n    { number: '1', element: 'Close' },\r\n    { number: '2-3', element: 'Near at #1d3 meter' },\r\n    { number: '4-6', element: 'Far' }],\r\n};\r\n\r\nexport const roomType = {\r\n  name: 'Room Type',\r\n  dice: '1d10',\r\n  entries: [\r\n    { number: '1-2', element: 'Empty' },\r\n    { number: '3', element: '{Trap}' },\r\n    { number: '4', element: 'Minor hazard' },\r\n    { number: '5', element: 'Solo monster' },\r\n    { number: '6', element: 'NPC' },\r\n    { number: '7', element: 'Monster mob' },\r\n    { number: '8', element: 'Major hazard' },\r\n    { number: '9', element: 'Treasure' },\r\n    { number: '10', element: 'Boss monster' },\r\n  ],\r\n};\r\n\r\nexport const trap = {\r\n  name: 'Trap',\r\n  dice: '1d6',\r\n  entries: [\r\n    { number: '1', element: 'Pit' },\r\n    { number: '2', element: 'Poison dart' },\r\n    { number: '3', element: 'Fireball' },\r\n    { number: '4', element: 'Gas' },\r\n    { number: '5', element: 'Blade' },\r\n    { number: '6', element: 'Electricity' },\r\n  ],\r\n};\r\n\r\nexport const tables = [\r\n  distance,\r\n  roomType,\r\n  trap,\r\n];\r\n","export default function isIterable(obj) {\r\n  if (obj == null) {\r\n    return false;\r\n  }\r\n  return typeof obj[Symbol.iterator] === 'function';\r\n}\r\n","export function rollDie(expression) {\r\n  const parts = expression.split('d');\r\n  const numberOfDice = parseInt(parts[0], 10);\r\n  const sides = parseInt(parts[1], 10);\r\n  let total = 0;\r\n\r\n  for (let i = 0; i < numberOfDice; i += 1) {\r\n    total += Math.floor(Math.random() * sides) + 1;\r\n  }\r\n  return total;\r\n}\r\n\r\nexport function rollOnTable(table) {\r\n  let result = '';\r\n  const randomNumber = rollDie(table.dice);\r\n  for (let i = 0; i < table.entries.length; i += 1) {\r\n    const entry = table.entries[i];\r\n    if (entry.number.includes('-')) {\r\n      const range = entry.number.split('-');\r\n      const lowEnd = parseInt(range[0], 10);\r\n      const highEnd = parseInt(range[1], 10);\r\n      if (randomNumber >= lowEnd && randomNumber <= highEnd) {\r\n        result = entry.element;\r\n      }\r\n    } else if (entry.number === randomNumber) {\r\n      result = entry.element;\r\n    }\r\n  }\r\n  const fullResult = `Roll on ${table.name}: ${result} (${randomNumber}) `;\r\n  return fullResult;\r\n}\r\n","import { parseExpression } from './parser';\r\nimport { rollOnTable } from './roll';\r\n\r\nexport function createJournalLine(content) {\r\n  const journal = document.getElementById('journal');\r\n  const newLine = document.createElement('div');\r\n  for (let i = 0; i < content.length; i += 1) {\r\n    newLine.appendChild(content[i]);\r\n  }\r\n  journal.appendChild(newLine);\r\n}\r\n\r\nexport function createRollOnTableButton(table) {\r\n  const button = document.createElement('button');\r\n  button.innerHTML = '<button style=\"display: inline-block\">ROLL</button>';\r\n  button.onclick = function btnFunction() {\r\n    createJournalLine(parseExpression(rollOnTable(table)));\r\n  };\r\n  return button;\r\n}\r\n\r\nexport function clearJournal() {\r\n  const journal = document.getElementById('journal');\r\n  journal.innerHTML = '';\r\n}\r\n","import { tables } from './table';\r\nimport isIterable from './utils';\r\nimport { createRollOnTableButton } from './journal';\r\nimport { rollDie } from './roll';\r\n\r\nexport function parseTable(expression) {\r\n  console.log(`parseForTable: ${expression}`);\r\n  const content = [];\r\n\r\n  const openIndex = expression.indexOf('{');\r\n  const closeIndex = expression.indexOf('}');\r\n\r\n  const before = expression.substring(0, openIndex);\r\n  const tableName = expression.substring(openIndex + 1, closeIndex);\r\n  const after = expression.substring(closeIndex + 1);\r\n\r\n  const table = tables.find((t) => t.name === tableName);\r\n  let button = null;\r\n  if (!table) {\r\n    console.error(`Table ${tableName} not found`);\r\n  } else {\r\n    button = createRollOnTableButton(table);\r\n  }\r\n\r\n  content.push(document.createTextNode(before));\r\n  content.push(document.createTextNode(tableName));\r\n  if (button) {\r\n    content.push(button);\r\n  }\r\n  if (isIterable(after)) {\r\n    content.push(...parseExpression(after));\r\n  } else {\r\n    content.push(parseExpression(after));\r\n  }\r\n  return content;\r\n}\r\n\r\nexport function parseExpression(expression) {\r\n  for (let i = 0; i < expression.length; i += 1) {\r\n    if (expression[i] === '{') {\r\n      return parseTable(expression);\r\n    } if (expression[i] === '[') {\r\n      return parseDie(expression);\r\n    }\r\n  }\r\n  return [document.createTextNode(expression)];\r\n}\r\n\r\nexport function parseDie(expression) {\r\n  const content = [];\r\n\r\n  const openIndex = expression.indexOf('[');\r\n  const closeIndex = expression.indexOf(']');\r\n\r\n  const before = expression.substring(0, openIndex);\r\n  const diceExpression = expression.substring(openIndex + 1, closeIndex);\r\n  const after = expression.substring(closeIndex + 1);\r\n\r\n  content.push(document.createTextNode(before));\r\n  content.push(document.createTextNode(rollDie(diceExpression)));\r\n  if (isIterable(after)) {\r\n    content.push(...parseExpression(after));\r\n  } else {\r\n    content.push(parseExpression(after));\r\n  }\r\n  return content;\r\n}\r\n","import { parseDie, parseExpression } from './parser';\r\nimport { createJournalLine, clearJournal } from './journal';\r\n\r\nconst button = document.getElementById('button');\r\nconst btnClearJournal = document.getElementById('clearJournal');\r\n\r\nbutton.onclick = function () {\r\n  // TEST_parseExpression();\r\n  // TEST_parseExpressionWithTable()\r\n  // TEST_createButton();\r\n\r\n  // var content = parseExpression(\"Simple expression with no dice or tables\");\r\n  // var content = parseDie(\"roll [1d6] times\");\r\n  // const content = parseDie('roll on {Trap} and then do something else');\r\n  const content = parseExpression('roll [1d6] times on table {Trap} and then do something else');\r\n  createJournalLine(content);\r\n};\r\n\r\nbtnClearJournal.onclick = function () {\r\n  console.log('clear journal clicked');\r\n  clearJournal();\r\n};\r\n"]}